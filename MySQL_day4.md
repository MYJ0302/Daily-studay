## 一、MySQL常用函数  
### 1.聚合函数  
常用的聚合函数：MAX/MIN/AVG/SUM/COUNT  
注意事项：聚合函数不能嵌套使用  
聚合函数的定义：指的是一组数据进行汇总的函数，输入的是一组数据，输出的是单个值  

### 2.字符串函数  
- lower()：将字符串全部转换为小写  
- upper()：将字符串全部转换为大写  
- length()：用来统计字符串长度  
字符串删除空格的函数  
- trim()：将字符串左右两侧的空格删除  
- ltrim()：将字符串左侧的空格删除  
- rtirm()：将字符串右侧的空格删除  
字符串的反转  
- reverse()：将字符串进行反转  
  
字符串合并函数：  
- concat(s1,s2)：将字符串合并在一起  
如果有一个参数的值为NULL,则结果就是NULL;  

- concat_ws(separator, s1,s2)：使用separator分隔符吧字符串连接在一起  
如果其中一个字符串为NULL,他不会返回NULL，而是会跳过NULL值  

- substr()：用来截取字符串，从指定的位置开始，截取指定数量的子字符串  
语法:SUBSTR(str, start, len)  
str表示原字符串  
start表示从第几位开始截取。第一个字符对应的位置是1  
len表示要截取几位，可以省略，如果省略表示从start开始截取到字符串的结尾  

填充函数  
- LPAD(str,len,padstr)：表示从字符串的左侧开始填充，直到字符串的长度达到了指定的长度  
str表示原字符串  
len表示填充以后字符串的长度  
padstr表示要用什么来填充原字符串  
- RPAD(str,len,padstr)：表示从字符串的右侧开始填充，直到字符串的长度达到了指定的长度  
str表示原字符串  
len表示填充以后字符串的长度  
padstr表示要用什么来填充原字符串  

### 3.数值函数  
- round(x,y):求参数x四舍五入的值，保留y位小数  
- ceil(x):向上取整  
- floor(x):向下取整  
- abs(x):求绝对值  
- power(x,y):求x的y次方  
- rand():生成一个0-1之间的随即小数，包含0，不包含1  

### 4.日期函数  
- CURRENT_DATE():用来获取到当前的年月日  
- CURR_TIME():用来获取到当前的时分秒  
- NOW():用来获取到年月日 时分秒  
- YEAR():用来获取到某个日期的年份  
- MONTH():用来获取到某个日期的月份  
- DAY():用来获取到某个日期的天数  
DATE_SUB()函数：表示从指定的日期开始减去指定的时间间隔  
语法：**DATE_SUB(date, INTERVAL expr type)**  

参数说明：  
date 表示指定的开始日期  
INTERVAL 是一个关键字  
expr 要减去的指定的时间间隔，expr是一个字符串  
type 表示时间单位，可以是年月天也可以是组合单位：例如：年-月的组合  

### 5.空值转换函数  
**IFNULL(参数1, 参数2)**   
参数1  表示要处理的数据  
参数2  表示在处理参数1时，如果遇到了NULL值，会把NULL替换为参数2这个值。  

## 二、存储过程  
### 1.存储过程的定义  
存储过程是MySQL中一段SQL代码，即它是一个已经写好的SQL语句和控制语句的集合  
### 2.存储过程的使用场景  
(1)有时候需要实现一些复杂的业务逻辑，就可以把复杂的业务逻辑封装在存储过程中  
(2)提高代码的复用性  
(3)执行数据库的定时任务  
### 3.存储过程的使用  
存储过程的使用与python中自定义的函数类似的  
存储过程的使用分为两步： 
(1)先创建存储过程  
(2)在调用存储过程  
创建存储过程的语法：  
DELIMITER //  
CREATE PROCEDURE  
BEGIN  
存储过程体  
END //  
DELIMITER;  

调用存储过程的语法：  
CALL 存储过程的名称(参数);  
删除存储过程  
语法：DROP PROCEDURE 存储过程的名称  

### 4.存储过程的参数  
##### IN参数  
IN参数的作用与python中函数中的形参是一样的  
创建带有IN参数的存储过程的语法：  
DELIMITER //  
CREATE PROCEDURE 存储过程名称(IN 参数名 数据类型)  
BEGIN  
SELECT * FROM 表名 WHERE 列名 比较运算符 参数名;  
END //  
DELIMITER;  
在定义IN 参数时，关键字IN 可以省略  
调用带有IN参数的存储过程  
CALL 存储过程名称(实参);  

##### OUT参数  
OUT参数的作用与python中函数的返回值的作用是一样的  
使用OUT参数时需要使用到MySQL中的变量  
语法：  
DELIMITER //  
CREATE PROCEDURE 存储过程名称(OUT 参数名 数据类型)  
BEGIN  
SELECT 列名 INTO 参数名 FROM 表名 WHERE 条件;  
END //  
DELIMITER;  
调用带有OUT参数的存储过程  
CALL 存储过程名称 (@用户变量);  
SELECT @用户变量;  

### 5.存储过程中的变量  
#### (1)局部变量  
局部变量与python中函数中定义的局部变量是一样的。  
局部变量的作用域：局部变量只能在存储过程内部使用，出了存储过程就无法使用，即只能在BEGIN和END中间使用。  
局部变量的定义：  
方法一：在定义局部变量的同时给局部变量赋值  
DECLARE  变量名  数据类型  DEFAULT  默认值;  
DECLARE 声明  
方法二：先定义局部变量，后赋值  
DECLARE  变量名  数据类型;  
SET  变量名 = 值;  
#### (2)用户变量  
用户变量的作用与 python中的全局变量是类似的。  
用户变量的作用域：在存储过程中可以使用，在存储过程外也可以使用。  
用户变量的定义：用户变量不需要事先声明，MySQL会自动根据赋的值来确定它的数据类型。用户变量在使用的时候一定要在变量名前面加上一个@符号，在给用户变量赋值的同时就相当于定义了用户变量。  
在存储过程外部也可以调用用户变量  
注意事项：MySQL中要求，所有的定义都要写在最前面。  

### 6.SELECT赋值语句  
指的是把从某一张表中查询出来的数据赋值给某个变量  
语法：  
SELECT 列名1, 列名2 INTO 局部变量, @用户变量 FROM 表名 WHERE 条件;  
注意事项：  
1.INTO 前面列名的数量要与INTO后面变量的数量一致。  
2.WHERE 条件只能过滤出来一行值，否则，就无法赋值。  

### 7.存储过程中的分支结构  
#### (1)IF 双分支结构  
语法：  
IF 条件表达式 THEN  
分支语句1;  
ELSE  
分支语句2;  
END IF;  
#### (2)CASE 语句的多分支结构  
语法：  
CASE  
WHEN 条件1 THEN 分支语句1;  
WHEN 条件2 THEN 分支语句2;  
ELSE 分支语句;  
END CASE;  

### 8.循环结构  
#### (1)WHILE循环  
语法：  
WHILE 条件 do  
循环语句;  
END WHILE;  
WHILE循环执行的过程  
WHILE 循环每次执行开始时，都会检查条件是否成立：  
如果条件成立，就会执行循环语句  
如果条件不成立，就会结束循环  
#### (2)REPEAT循环  
语法：  
REPEAT  
循环语句;  
until 条件  
END REPEAT;  
REPEAT循环执行的过程  
先执行一次循环语句，然后再判断条件是否成立：  
如果条件成立，结束循环  
如果条件不成立，循环继续执行  

## 三、索引  
### 1.索引的定义  
索引是帮助MySQL高校奥查询数据的一种数据结构  
作用：用来提高查询效率。  
索引类似于书中的目录，可以帮助我们快速的找到要查询的数据。  
索引一般用在数据量大的表中。  
### 2.索引的优缺点  
优点：可以提高查询数据的效率  
缺点：降低数据插入的效率，增加存储空间  





